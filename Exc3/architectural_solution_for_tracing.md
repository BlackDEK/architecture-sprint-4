# Архитектурное решение по трейсингу

## Какие данные должен хранить трейсинг

- ID заказа.
- Время начало обработки заказа в системе.
- Время окончания обработки заказа в системе.
- Ошибки возникшие во время обработки заказа.
- Статус заказа.

## Мотивация

- Что позволит добавление трейсинга.
  - Позволит выявлять причину не выполнения или задержки обработки заказов.
- Технические метрики на которые повлияет трейсинг.
  - Снизит время обработки заказа.
  - Уменьшит кол-во ошибок во время обработки заказа.
- Бизнес метрики на которые повлияет трейсинг.
  - Повысит уровень удовлетворенности клиентов.
  - Повысит процент реализованных заказов от общего кол-ва.

## Предлагаемое решение

- Стак для трейсинга.
  - Для сбора трассировки используем OpenTelemetry, также его можно использовать для сбора логов и метрик.
  - Для анализа трассировки будем использовать Jagger.
- Что доработать.
  - Все контейнеры через которые проходит сущность Заказ.
    - Shop API.
    - CRM API.
    - MES API.
    - Internet Shop.
    - Shop.

## Ограничения

- В нашем кейсе трейсинг будет полезен только при обработки заказов, так как только эта бизнес-сущности проходит через несколько сервисов.
- Возможно теоретически можно рассмотреть трейсинг для файлов 3д модели, и сообщений между CRM и MES, однако сейчас это решение выглядит избыточным.

## Аспекты безопасности

- Для обеспечения безопасности можно предпринять следующие меры.
  - Хранить все данные связанные с телеметрией в закрытом контуре компании и получать доступ к ним, только из офиса.
  - Реализовать логирования при работе с данными трассировки, чтобы отслеживать подозрительные действия.
  - Шифровать данных трассировки при отправки их с облака на сервера компании.
